<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>promise对象</title>
</head>
<body>

</body>
<script type="application/ecmascript">
//    var pro=new Promise(function (resolve, reject) {
//        console.log(1)
//        resolve()
//    })
//    pro.then(function () {
//        console.log(2)
//    },function () {
//        console.log(3)
//    })
//    console.log(12)

//    function timeo(ms) {
//        return new Promise((resolve,reject) => {
//            setTimeout (resolve,ms)
//            console.log(123)
//        })
//    }
//    timeo(5000).then(function () {
//        console.log(1111111)
//    })

//    var pr=new Promise((resolve,reject) => {
//        console.log(333)
//        reject();
//        console.log('11')
//        console.log('22')
//    })
//    pr.then(function () {
//        console.log(1)
//    },function () {
//        console.log(2)
//    })

//    var pr=new Promise((resolve,reject) => {
//        console.log(1)
//        throw new Error('error')
////        resolve()
//        reject()
//    })
//    pr.then(() => {
//        console.log(22)
//    }).catch (err => {
//    console.log(err)
//})

//var pr=new Promise((resolve,reject) => {
//    console.log(1)
//throw new Error('error')
////        resolve()
//reject()
//})
//pr.then(() => {
//    throw new Error('error')
//}).then (()=>{
//    throw new Error('error2')
//}).catch (err => {
//    console.log(err)
//})


//    var pro=new Promise((resolve,reject) => {
////        resolve()
//        reject()
//    })
//    pro.then(function () {
//        console.log(2)
//    }).catch(function () {
//        console.log(222)
//        throw new Error('err')
//    }).then(function () {
//        console.log(3)
//    }).catch(function () {
//        console.log(333)
//    })


//    var pro =new Promise((resolve,reject)=>{
//        resolve()
////        throw new Error('err')
//    })
//    pro.then(()=>{
//        console.log(1)
//    }).catch(()=>{
//        console.log(333)
//}).finally(()=>{
//        console.log(2)
//    })

//    console.log(Promise.resolve(5).finally(()=>{}))
//    console.log(Promise.resolve(2).finally(()=>{}))


//    var rpro=new Promise((resolve,reject)=>{
//        console.log(1)
//        resolve()
//    })
//    rpro.then(()=>{
//        console.log(111)
//    }).then(()=>{
//        console.log(111111)
//throw new Error('error2')
//    }).catch (err => {
//    console.log(err)
//})


//const pro=new Promise((resolve,reject)=>{
//    resolve()
//})
//pro.then(()=>{
//    console.log(1)
//})
//const pro2=new Promise((resolve,reject)=>{
//    reject()
//})
//pro2.then(null,reject=>{
//    console.log(2)
//})
//
//const pros=Promise.all([pro,pro2])
//pros.then(resolve=>{
//    console.log('resolve')
//},reject=>{
//    console.log('reject')
//})


//    const pro=new Promise((resolve,reject)=>{
//        resolve()
//    })
//    pro.then(()=>{
//        console.log(1)
//    })
//    const pro2=new Promise((resolve,reject)=>{
//        reject()
//    })
//    pro2.then(null,reject=>{
//        console.log(2)
//    })
//
//    const pros=Promise.race([pro,pro2])
//    pros.then(resolve=>{
//        console.log('resolve')
//    },reject=>{
//    console.log('reject')
//})


//    const pro1=new Promise((resolve,reject)=>{
//        resolve(2)
//    }).then(()=>{
//        console.log(222)
//})
//    const pro2=new Promise((resolve,reject)=>{
//        throw new Error('err')
//    })
//    const pros=Promise.all([pro1,pro2])
//    pros.then(()=>{
//        console.log(444)
//    }).catch (err=>{
//        console.log(err)
//})

//const p = Promise.race([
//    new Promise(function (resolve, reject) {
//        setTimeout(() => reject(new Error('request timeout')), 5000)
//    })
//]);
//
//p.then(console.log).catch(console.error);
//
//
//
//    const pro=Promise.race([new Promise((resolve,reject)=>{
//        setTimeout(()=> reject (new Error('err')),5000)
//    })])
//    pro.then(console.log()).catch(err=>{console.log(err)})


    var thenable={
        then: function(resolve, reject) {
            resolve(42);
        }
    }
//    var p1=Promise.resolve(thenable);
//    p1.then(value=>{
//        console.log(value)
//    })

//    var p2=Promise.resolve('thenabl');
//    p2.then(()=>{
//        console.log(112)
//    },()=>{
//        console.log(22)
//})

//    var a=Promise.resolve('sehun')
//    a.then(val=>{
//        console.log(val)
//    })

//    var a=Promise.resolve()
//    a.then(()=>{
//        console.log(1)
//    })

//    setTimeout(function () {
//        console.log('three');
//    }, 2000);
//
//    Promise.resolve().then(function () {
//        console.log('two');
//    });
//
//    console.log('one');

//    const pro=new Promise((resolve,reject)=> reject('err'))
//    pro.then((null,err=>{
//        console.log(err)
//    }))

//    const p = new Promise((resolve, reject) => reject('出错了'))
//
//    p.then(null, s=>{console.log(s)});
//
//    const p2=new Promise((resolve,reject) => reject('出错'))
//    p2.then(null, s=>{console.log(s)})

//const promise = new Promise(function (resolve, reject) {
//    setTimeout(() => {
//        reject('err')
//}, 1000)
//})
//
//promise.then(
//    res => console.log('s1'),
//    err => console.log('e1')
//).then(
//    res => console.log('s2')
//).catch(
//    err => console.log('e2')
//)


//const thenable = {
//    then(resolve, reject) {
//        reject('出错了');
//    }
//};
//
//Promise.reject(thenable)
//    .catch(e => {
//    console.log(e === thenable)
//})

//    const thenable1={
//        then(resolve,reject){
//            reject('出错了')
//        }
//    }
//    Promise.reject(thenable1).catch(e=>{
//        console.log(e)
//    })


//    const preloadImage = function (path) {
//        return new Promise(function (resolve, reject) {
//            const image = new Image();
//            image.onload  = resolve;
//            image.onerror = reject;
//            image.src = path;
//        });
//    };

//    const preloadimg=function (path) {
//        return new Promise((resolve,reject)=>{
//            const image=new Image()
//            resolve(path)
//            image.load=resolve
//            image.onerror=reject
//            image.src=path
//        })
//    }

//    var f=function () {return  console.log(111)}
//    Promise.resolve().then(console.log(f))

//    const f = () => console.log('now');
//    (async () => f())();
//    console.log('next');

//const f = () => console.log('now');
//(
//    () => new Promise(
//    resolve => resolve(f())
//)
//)();
//console.log('next');
//
//const fa= () => console.log('now');
////const fa= () => console.log('now');
//(
//    ()=>new Promise(
//        resolve=>resolve(fa())
//    )
//)()
//    console.log('next')

//    var f=function () {
//        console.log('now')
//    }
//    Promise.try(f)
//    console.log('next')
//const f = () => console.log('now');
//Promise.try(f);
//console.log('next');


//        var p3=Promise.reject('err')
////var p3=new Promise((resolve,reject)=>{
////        reject()
////})
//        p3.then(()=>{
//            console.log(111)
//        },value=>{
//            console.log(value)
//        })

function getDataPromise(url) {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
        let res = {
            url: url,
            data: {}
        }
        resolve(res)
    }, 1000)
})
}


//function * getData() {
//    let res1 = yield getDataPromise('/data/text2.json');
//    console.log(res1);
//    console.log(1);
//}
////getData()
//
//
//function run(gen) {
//    let fn = gen()
//    console.log(fn.res1)
//
//
////    function next(data) {
////        let res = fn.next(data)
////        if (res.done) return res.value
////        res.value.then((info) => {
////            next(info)
////        })
////    }
////    next()
//}
//
//run(getData)

    var p =Promise.all('ddd')
    p.then(()=>{
        console.log(1)
    },()=>{
        console.log(2)
})



</script>
</html>